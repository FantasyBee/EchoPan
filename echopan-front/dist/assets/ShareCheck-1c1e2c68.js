import{k as x,r as c,ag as a,o as b,c as w,a as e,Q as r,O as l,I as m,W as R,a6 as V,M as N}from"./@vue-330d97db.js";import{u as D,b as q}from"./vue-router-058388f3.js";import{_ as B}from"./index-b9f773a6.js";import"./element-plus-d7f7ad33.js";import"./lodash-es-32f1e46b.js";import"./@vueuse-df397a67.js";import"./@element-plus-4e918346.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-d2501332.js";import"./APlayer-9761ea46.js";import"./async-validator-10c6301d.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-5ec34e26.js";import"./vue-cookies-fe30a31f.js";import"./@highlightjs-189340a0.js";import"./highlight.js-f4cd52b3.js";import"./axios-439bb627.js";import"./docx-preview-01ead95e.js";import"./jszip-34d9bb61.js";import"./xlsx-04f2268f.js";import"./vue-pdf-embed-1732b75d.js";import"./vue-2734522e.js";import"./dplayer-c9b96a6f.js";import"./vue-clipboard3-81308b3a.js";import"./clipboard-11dc70c3.js";const A={class:"share"},E={class:"body-content"},K={class:"code-panel"},M={class:"file-info"},T={class:"avatar"},L={class:"share-info"},O={class:"user-info"},Q={class:"nick-name"},U={class:"share-time"},W={class:"file-name"},$={class:"code-body"},j={class:"input-area"},z={__name:"ShareCheck",setup(F){const{proxy:p}=x(),h=D(),f=q(),d={getShareInfo:"/showShare/getShareInfo",checkShareCode:"/showShare/checkShareCode"},i=f.params.shareId,o=c({});(async()=>{let s=await p.Request({url:d.getShareInfo,params:{shareId:i}});s&&(o.value=s.data)})();const n=c({}),u=c(),v={code:[{required:!0,message:"请输入提取码"},{min:5,message:"提取码为5位"},{max:5,message:"提取码为5位"}]},_=async()=>{u.value.validate(async s=>{!s||!await p.Request({url:d.checkShareCode,params:{shareId:i,code:n.value.code}})||h.push(`/share/${i}`)})};return(s,t)=>{const S=a("Avatar"),I=a("el-input"),g=a("el-button"),k=a("el-form-item"),y=a("el-form");return b(),w("div",A,[e("div",E,[t[4]||(t[4]=e("div",{class:"logo"},[e("span",{class:"iconfont icon-pan"}),e("span",{class:"name"},"Echo个人文件存储系统")],-1)),e("div",K,[e("div",M,[e("div",T,[r(S,{userId:o.value.userId,avatar:o.value.avatar,width:50},null,8,["userId","avatar"])]),e("div",L,[e("div",O,[e("span",Q,l(o.value.nickName),1),e("span",U,"分享于 "+l(o.value.shareTime),1)]),e("div",W,"分享文件："+l(o.value.fileName),1)])]),e("div",$,[t[3]||(t[3]=e("div",{class:"tips"},"请输入提取码：",-1)),e("div",j,[r(y,{model:n.value,rules:v,ref_key:"formDataRef",ref:u,maxLength:5,onSubmit:t[1]||(t[1]=R(()=>{},["prevent"]))},{default:m(()=>[r(k,{prop:"code"},{default:m(()=>[r(I,{class:"input",modelValue:n.value.code,"onUpdate:modelValue":t[0]||(t[0]=C=>n.value.code=C),onKeyup:V(_,["enter"])},null,8,["modelValue"]),r(g,{type:"primary",onClick:_},{default:m(()=>t[2]||(t[2]=[N("提取文件")])),_:1})]),_:1})]),_:1},8,["model"])])])])])])}}},ke=B(z,[["__scopeId","data-v-97ca4b8f"]]);export{ke as default};
